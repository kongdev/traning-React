module.exports=__NEXT_REGISTER_PAGE("/login",function(){return{page:webpackJsonp([3],{350:function(e,t,n){e.exports=n(351)},351:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=n.n(o),a=n(18),u=n.n(a),i=n(141),c=n(140),l=n.n(c);var s=n(352),f=n(55),p=n(85),b=n.n(p),y=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["mutation login($username : String! , $password: String!) {\n    token : login(username :$username , password : $password)\n  }\n"]);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var g=b()(y),w=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return d(o,(n=o=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),Object.defineProperty(v(o),"state",{configurable:!0,enumerable:!0,writable:!0,value:{username:"",password:""}}),Object.defineProperty(v(o),"onUsernameChange",{configurable:!0,enumerable:!0,writable:!0,value:function(e){o.setState({username:e.target.value})}}),Object.defineProperty(v(o),"onPasswordChange",{configurable:!0,enumerable:!0,writable:!0,value:function(e){o.setState({password:e.target.value})}}),Object.defineProperty(v(o),"onSubmit",{configurable:!0,enumerable:!0,writable:!0,value:function(e){e.preventDefault(),fetch("http://localhost:3000/login",{method:"POST",body:JSON.stringify({username:o.state.username,password:o.state.password}),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){o.props.onLoginSuccess(e.token)}).catch(function(e){console.error(e)})}}),n))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),n=t,(a=[{key:"render",value:function(){var e=this;return this.props.isLoggedIn?r.a.createElement("div",null,r.a.createElement("p",null,"LoggedIn "),r.a.createElement("button",{onClick:this.props.onLogout},"logout")):r.a.createElement(f.Mutation,{mutation:g},function(t,n){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(){var n,o=(n=u.a.mark(function n(o){var r;return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o.preventDefault(),n.next=3,t({variables:{username:e.state.username,password:e.state.password}});case 3:if((r=n.sent).data.token){n.next=6;break}return n.abrupt("return",alert("Login Fail"));case 6:console.log(r),e.props.onLoginSuccess(r.data.token);case 8:case"end":return n.stop()}},n,this)}),function(){var e=this,t=arguments;return new Promise(function(o,r){var a=n.apply(e,t);function u(e,t){try{var n=a[e](t),u=n.value}catch(e){return void r(e)}n.done?o(u):Promise.resolve(u).then(i,c)}function i(e){u("next",e)}function c(e){u("throw",e)}i()})});return function(e){return o.apply(this,arguments)}}()},r.a.createElement("div",null,r.a.createElement("input",{placeholder:"username",type:"text",onChange:e.onUsernameChange})),r.a.createElement("div",null,r.a.createElement("input",{placeholder:"password",type:"password",onChange:e.onPasswordChange})),r.a.createElement("button",{type:"submit"},"login")))})}}])&&h(n.prototype,a),i&&h(n,i),t}(),O=Object(s.withRouter)(Object(i.b)(function(e){return{isLoggedIn:null!=e.auth.token}},function(e,t){return{onLoginSuccess:function(n){e(function(e){return function(t){(new l.a).set("token",e,{path:"/"}),t({type:"LOGIN_SUCCESS",token:e})}}(n)),console.log(t),t.router.replace("/")},onLogout:function(){e(function(e){(new l.a).remove("token"),e({type:"LOGOUT"})})}}})(w));function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function E(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}n.d(t,"default",function(){return _});var _=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),E(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}var n,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),n=t,(a=[{key:"render",value:function(){return r.a.createElement(O,null)}}])&&j(n.prototype,a),u&&j(n,u),t}()},352:function(e,t,n){e.exports=n(42)}},[350]).default}});