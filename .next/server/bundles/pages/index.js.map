{"version":3,"file":"bundles/pages/index.js","sources":["webpack:///webpack/bootstrap aa2aca07987838f1ff37","webpack:///components/GuestBookApollo.js","webpack:///components/NewPostForm.js","webpack:///components/PostList.js","webpack:///components/PostListItem.js","webpack:///pages/index.js","webpack:///external \"@babel/runtime/regenerator\"","webpack:///external \"graphql-tag\"","webpack:///external \"react\"","webpack:///external \"react-apollo\"","webpack:///external \"styled-components\""],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tvar threw = true;\n \t\ttry {\n \t\t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n \t\t\tthrew = false;\n \t\t} finally {\n \t\t\tif(threw) delete installedModules[moduleId];\n \t\t}\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap aa2aca07987838f1ff37","import React, { Component } from 'react'\nimport gql from 'graphql-tag'\nimport { Query, Mutation, graphql } from 'react-apollo'\n\nimport PostList from './PostList'\nimport NewPostForm from './NewPostForm';\n\nconst _postFragment = gql`\nfragment postFragment on Post {\n\tid\n    title\n    tags {\n      name\n    }\n    content\n}`\n\n\nconst postsQuery = gql`\n    query listPost {\n\t\tposts {\n\t\t\t...postFragment\n\t\t}\n}\n${_postFragment}`\n\nconst postCreatedSub = gql`subscription postCreate{\n\t\tpostCreated {\n\t\t\t...postFragment\n\t\t}\n}\n${_postFragment}`\n\nconst createPostMutation = gql`mutation createPost($postData : PostData!) {\n    post :createPost(data: $postData){\n      ...postFragment\n    }\n  }\n\t${_postFragment}`\n/*\nexport default class GuestBookApollo extends Component {\n    render() {\n        return (\n            <Query query={postsQuery}>\n                {({ data, loading, error }) => {\n                    if (loading) {\n                        return <div>loading..</div>\n                    }\n                    return <PostList posts={data.posts} />\n                }}\n            </Query>\n        )\n    }\n}*/\n\nclass GuestBookApollo extends Component {\n\tcomponentDidMount() {\n\t\tthis.props.subscribe()\n\t}\n\n\trender() {\n\t\t//console.log(this.props.data)\n\t\tif (this.props.loading) {\n\t\t\treturn <div>loading..</div>\n\t\t}\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<Mutation mutation={createPostMutation}\n\t\t\t\t\tupdate={(cache, result) => {\n\t\t\t\t\t\tconsole.log(result.data.post)\n\n\t\t\t\t\t\tconst { posts } = cache.readQuery({ query: postsQuery })\n\t\t\t\t\t\tconst newPosts = [...posts, result.data.post]\n\t\t\t\t\t\tcache.writeQuery({\n\t\t\t\t\t\t\tquery: postsQuery,\n\t\t\t\t\t\t\tdata: { posts: newPosts }\n\t\t\t\t\t\t})\n\t\t\t\t\t}}>\n\t\t\t\t\t{createPostMutation => {\n\t\t\t\t\t\treturn <NewPostForm onCreatePost={({ title, content }) => {\n\t\t\t\t\t\t\tconst postData = {\n\t\t\t\t\t\t\t\ttitle, content\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconst variables = { postData }\n\n\t\t\t\t\t\t\tcreatePostMutation({\n\t\t\t\t\t\t\t\tvariables\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}} />\n\t\t\t\t\t}}\n\t\t\t\t</Mutation>\n\n\t\t\t\t<PostList posts={this.props.posts} />\n\t\t\t</React.Fragment>\n\t\t)\n\t}\n}\n\nexport default graphql(postsQuery, {\n\tprops: (res) => {\n\t\t//console.log(res)\n\t\treturn {\n\t\t\tposts: res.data.posts,\n\t\t\tloading: res.data.loading,\n\t\t\tsubscribe: () => {\n\t\t\t\tres.data.subscribeToMore({\n\t\t\t\t\tdocument: postCreatedSub,\n\t\t\t\t\tupdateQuery: (prev, { subscriptionData }) => {\n\t\t\t\t\t\tif (!subscriptionData.data.postCreated) return prev\n\n\t\t\t\t\t\tconst postCreated = subscriptionData.data.postCreated\n\n\t\t\t\t\t\treturn Object.assign({}, prev, {\n\t\t\t\t\t\t\tposts: [...prev.posts, postCreated]\n\t\t\t\t\t\t})\n\t\t\t\t\t\t//console.log('prev', prev)\n\t\t\t\t\t\t//console.log('res', res)\n\t\t\t\t\t\t//return prev\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n})(GuestBookApollo)\n\n\n\n// WEBPACK FOOTER //\n// components/GuestBookApollo.js","import React, { Component } from 'react'\n\nexport default class NewPostForm extends Component {\n\n\n\tstate = {\n\t\tinputValue: '',\n\t\ttextareaValue: ''\n\t}\n\n\thandleInputChange = (e) => {\n\t\t//console.log(e.target.value)\n\t\tthis.setState({\n\t\t\tinputValue: e.target.value\n\t\t})\n\n\t}\n\n\thandleTextareaChange = (e) => {\n\t\t//console.log(e.target.value)\n\t\tthis.setState({\n\t\t\ttextareaValue: e.target.value\n\t\t})\n\t}\n\n\thandleSubmit = (e) => {\n\t\te.preventDefault()\n\n\t\tconsole.log(this.state)\n\t\tthis.props.onCreatePost({\n\t\t\ttitle : this.state.inputValue,\n\t\t\tcontent : this.state.textareaValue\n\t\t})\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<form onSubmit={this.handleSubmit}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tplaceholder=\"text\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tvalue={this.state.inputValue}\n\t\t\t\t\t\t\tonChange={this.handleInputChange} />\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\tplaceholder=\"content\"\n\t\t\t\t\t\t\tvalue={this.state.textareaValue}\n\t\t\t\t\t\t\tonChange={this.handleTextareaChange}>\n\t\t\t\t\t\t</textarea></div>\n\n\t\t\t\t\t<button type=\"submit\">Post</button>\n\t\t\t\t</form>\n\n\t\t\t</div>\n\t\t)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// components/NewPostForm.js","import React, { Component } from 'react'\nimport PostListItem from './PostListItem';\n\nexport default class PostList extends Component {\n\trender() {\n\t\tconst postListItem = this.props.posts.map((post, key) => {\n\n\t\t\treturn <PostListItem key={key} post={post} />\n\t\t})\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{postListItem}\n\t\t\t</div>\n\t\t)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// components/PostList.js","import React, { Component } from 'react'\nimport styled from 'styled-components'\n\n\nconst PostItemBox = styled.div`\n\tbackground : #fff;\n\tpadding : 16px;\n\tmargin-bottom : 24px;\n\tborder : 1px solid #eee;\n\n\t.post-title {\n\t\tfont-size:20px;\n\t\tcolor :blue;\n\t}\n\n\tp{\n\t\tfont-size:16px;\n\t\tcolor : #606060;\n\t}\n`\n\n\n\nexport default class PostListItem extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<PostItemBox>\n\n\t\t\t\t<h4 className=\"post-title\">{this.props.post.title}</h4>\n\t\t\t\t<p>\n\t\t\t\t\t{this.props.post.content}\n\t\t\t\t</p>\n\n\t\t\t</PostItemBox>\n\t\t)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// components/PostListItem.js","import React, { Component } from 'react'\nimport GuestBookApollo from '../components/GuestBookApollo'\n\n\nexport default class index extends Component {\n\tstatic async getInitialProps() {\n\t\treturn {\n\t\t\tname: 'kong'\n\t\t}\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<GuestBookApollo />\n\t\t)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// pages/index.js","module.exports = require(\"@babel/runtime/regenerator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@babel/runtime/regenerator\"\n// module id = @babel/runtime/regenerator\n// module chunks = 0 3","module.exports = require(\"graphql-tag\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"graphql-tag\"\n// module id = graphql-tag\n// module chunks = 3","module.exports = require(\"react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = react\n// module chunks = 0 1 3","module.exports = require(\"react-apollo\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-apollo\"\n// module id = react-apollo\n// module chunks = 0 3","module.exports = require(\"styled-components\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"styled-components\"\n// module id = styled-components\n// module chunks = 1 3"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAUA;AAQA;AAOA;AAMA;;;;;;;;;;;;;;;;AAgBA;;;;;;;;;;;;;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAGA;AAAA;AAHA;AACA;AAGA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAFA;AAIA;AAVA;AAAA;AAAA;AAAA;AAAA;AAYA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AADA;AAGA;AAAA;AAAA;AAEA;AACA;AADA;AAGA;AATA;AAAA;AAAA;AAAA;AAAA;AAUA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;AAxCA;AACA;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AAEA;AACA;AADA;AAIA;AACA;AACA;AAbA;AAeA;AAnBA;AAqBA;AAxBA;;;;;;;;;;;;;;;;;;;;;;;;;;;AClGA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AACA;AAFA;;;;;AAKA;AACA;AACA;AACA;AADA;AAIA;;;;;AAEA;AACA;AACA;AACA;AADA;AAGA;;;;;AAEA;AACA;AAEA;AACA;AAAA;AACA;AACA;AAFA;AAIA;;;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;;;;AAzDA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHA;AACA;AACA;AACA;;;;;;;;;;;;;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAIA;;;;AAZA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJA;AACA;AAGA;AACA;AAkBA;;;;;;;;;;;;;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAMA;;;;AAZA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxBA;AACA;AACA;AAEA;;;;;;;;;;;;;AAMA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;;;;;;;;;;;AARA;AACA;AADA;AACA;;;;;;;;;;;;;;;;AAHA;AACA;;;;;;;;;;;;;;;;ACLA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;A","sourceRoot":""}